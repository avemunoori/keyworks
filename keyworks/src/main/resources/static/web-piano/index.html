<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIDI Note Capture</title>
    <link rel="stylesheet" href="/css/piano.css">
</head>
<body>
    <h1>MIDI Note Capture</h1>
    
    <div class="container">
        <div class="panel">
            <h2>Device Control</h2>
            
            <div class="user-selection">
                <label for="userSelect">Select User:</label>
                <select id="userSelect" class="user-select">
                    <option value="">-- Select User --</option>
                </select>
                <button id="refreshUsersBtn">Refresh Users</button>
            </div>
            
            <div class="controls">
                <select id="deviceSelect">
                    <option value="">-- Select MIDI Device --</option>
                </select>
                <button id="refreshBtn">Refresh Devices</button>
            </div>
            
            <div class="controls">
                <button id="connectBtn">Connect</button>
                <button id="disconnectBtn">Disconnect</button>
                <button id="startRecordingBtn">Start Recording</button>
                <button id="stopRecordingBtn" disabled>Stop Recording</button>
            </div>
            
            <div class="controls">
                <button id="downloadPdfBtn" disabled>Download PDF</button>
                <button id="simulateBtn">Simulate Input</button>
            </div>
            
            <div id="statusDisplay">
                <p><span class="status-indicator status-disconnected"></span> Status: Disconnected</p>
            </div>
        </div>
        
        <div class="panel">
            <h2>Log</h2>
            <div id="logContainer" class="log-container"></div>
        </div>
    </div>
    
    <div class="panel">
        <div class="tabs">
            <div class="tab active" data-tab="recording">Recording Info</div>
            <div class="tab" data-tab="lilypond">LilyPond Code</div>
            <div class="tab" data-tab="notes">Notes</div>
        </div>
        
        <div id="recordingTab" class="tab-content active">
            <div id="recordingInfo" class="recording-info">
                <p>No active recording.</p>
            </div>
        </div>
        
        <div id="lilypondTab" class="tab-content">
            <pre id="lilypondCode" class="lilypond-code">% No LilyPond code generated yet</pre>
        </div>
        
        <div id="notesTab" class="tab-content">
            <div id="noteDisplay" class="note-display">
                <p>No notes recorded yet.</p>
            </div>
        </div>
    </div>
    
    <div class="panel">
        <h2>Virtual MIDI Keyboard</h2>
        <p>Click the keys to play notes:</p>
        <div id="virtualKeyboard"></div>
    </div>

    <div class="panel">
        <h2>Help</h2>
        <div class="help-content">
            <h3>Getting Started</h3>
            <ol>
                <li>Select a user from the dropdown (or login if using authentication)</li>
                <li>Select a MIDI device from the dropdown</li>
                <li>Click "Connect" to connect to the device</li>
                <li>Click "Start Recording" to begin capturing MIDI notes</li>
                <li>Play your MIDI instrument</li>
                <li>Click "Stop Recording" when finished</li>
                <li>Click "Download PDF" to get sheet music</li>
            </ol>
            
            <h3>Virtual Keyboard</h3>
            <p>You can use the virtual keyboard to test MIDI input without a physical device:</p>
            <ul>
                <li>Click on keys to play notes</li>
                <li>Start recording first to capture the notes</li>
            </ul>
            
            <h3>Simulation</h3>
            <p>Click "Simulate Input" to generate a C major scale for testing.</p>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 MIDI Note Capture. All rights reserved.</p>
    </footer>

    <script src="/js/piano.js"></script>
</body>
</html>